language: cpp

os:
  - linux

install:
  - travis_retry sudo apt-get update -qq; travis_retry sudo apt-get install ocaml zlib1g-dev libgc-dev -qq
  - travis_retry git clone https://github.com/HaxeFoundation/neko.git ~/neko && cd ~/neko && make os=linux -s && sudo make install -s && cd $TRAVIS_BUILD_DIR

script:
  - make -s
  - make tools -s
  - sudo make install -s

